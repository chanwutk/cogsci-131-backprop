---
config:
  theme: default
  layout: dagre
  look: classic
---
flowchart LR
    x1["$$X_1$$"] -- $$W^{(1)}_{11}$$ --> z2_1["$$Z^{(2)}_{1}$$"]
    x1 -- $$W^{(1)}_{12}$$ --> z2_2["$$Z^{(2)}_{2}$$"]
    x1 -- $$W^{(1)}_{13}$$ --> z2_3["$$Z^{(2)}_{3}$$"]
    x2["$$X_2$$"] -- $$W^{(1)}_{21}$$ --> z2_1
    x2 -- $$W^{(1)}_{22}$$ --> z2_2
    x2 -- $$W^{(1)}_{23}$$ --> z2_3
    z2_1 -- $$\sigma$$ --> a2_1["$$a^{(2)}_{1}$$"]
    z2_2 -- $$\sigma$$ --> a2_2["$$a^{(2)}_{2}$$"]
    z2_3 -- $$\sigma$$ --> a2_3["$$a^{(2)}_{3}$$"]
    a2_1 -- $$W^{(2)}_{11}$$ --> z3_1["$$Z^{(3)}_{1}$$"]
    a2_2 -- $$W^{(2)}_{21}$$ --> z3_1
    a2_3 -- $$W^{(2)}_{31}$$ --> z3_1
    z3_1 -- $$\sigma$$ --> a3_1["$$a^{(3)}_{1}$$"]
    x1 --> real["Real World"]
    x2 --> real
    real --> y_hat["$$\hat{Y}$$"]
    a3_1 --> l["$$Loss = \frac{1}{2}(\hat{Y} - a^{(3)}_1)^2$$"]
    y_hat --> l
    %% n0["$$\hat{X}$$"] -- $$\hat{W}^{(1)}$$ --> n1["$$\hat{Z}^{(2)}$$"]
    %% n1 -- $$\sigma$$ --> n2["$$\hat{a}^{(2)}$$"]
    %% n2 -- $$\hat{W}^{(2)}$$ --> n3["$$\hat{Z}^{(3)}$$"]
    %% n3 -- $$\sigma$$ --> n4["$$\hat{a}^{(3)}$$"]

subgraph X["$$\hat{X}$$"]
    x1
    x2
end
subgraph Z2["$$\hat{Z}^{(2)}$$"]
    z2_1
    z2_2
    z2_3
end
subgraph a2["$$\hat{a}^{(2)}$$"]
    a2_1
    a2_2
    a2_3
end
subgraph Z3["$$\hat{Z}^{(3)}$$"]
    z3_1
end
subgraph a3["$$\hat{a}^{(3)}$$"]
    a3_1
end